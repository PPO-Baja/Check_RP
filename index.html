<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Check RP</title>

  <!-- PWA meta -->
  <meta name="theme-color" content="#000000" />
  <link rel="manifest" href="manifest.webmanifest" />
  <link rel="apple-touch-icon" href="icon-192.png" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="default" />
  <meta name="apple-mobile-web-app-title" content="Formulario" />

  <style>
    html, body {
      height: 100%;
      margin: 0;
      padding: 0;
      background: #000;
      display: flex;
      justify-content: center;
      align-items: center;
      color: #fff;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Helvetica, Arial;
      text-align: center;
      overflow: hidden;
    }

    .brand-container {
      opacity: 1;
      transition: opacity 1.5s ease; /* fade-out dura 1.5s */
    }

    .fade-out {
      opacity: 0;
    }

    /* Branding */
    .brand {
      font-size: 2rem;
      font-weight: 600;
      color: #EB0A1E;
    }

    .brand .location {
      font-weight: 450;
      color: #0978C8;
      margin-left: 0.1rem;
      font-size: 1.5rem;
    }

    .opcion {
      margin-top: 0.25rem;
      font-size: 12px;
      color: #ccc;
      font-weight: 300;
    }

    /* Barra de carga */
    .progress-bar {
      width: 80%;
      height: 6px;
      background: #333;
      border-radius: 3px;
      margin: 20px auto 0;
      overflow: hidden;
    }

    .progress-fill {
      width: 0;
      height: 100%;
      background: #EB0A1E;
      border-radius: 3px;
      transition: width 0.05s linear;
    }
  </style>
</head>
<body>

  <div class="brand-container" id="brandContainer">
    <div class="brand">
      <span class="toyota">PPO</span>
      <span class="location">Baja California</span>
    </div>
    <div class="opcion">| Post Production Option</div>

    <div class="progress-bar">
      <div class="progress-fill" id="progressFill"></div>
    </div>
  </div>

  <script>
    const formUrl = "https://forms.office.com/Pages/ResponsePage.aspx?id=HS1kjAnXsEerEAgK8QeY--uM_KDM0uhFtfRaAnmZzAtUNFk5NFVVTFAwSjRBOFlOWFBaTFFUUzJaRi4u&qrcode=true";
    const brandContainer = document.getElementById('brandContainer');
    const progressFill = document.getElementById('progressFill');

    const duration = 1500; // duración total en ms (1.5s)

    // Animar barra de carga
    let start = null;
    function animateProgress(timestamp) {
      if (!start) start = timestamp;
      const elapsed = timestamp - start;
      const progress = Math.min((elapsed / duration) * 100, 100);
      progressFill.style.width = progress + '%';
      if (elapsed < duration) {
        requestAnimationFrame(animateProgress);
      }
    }
    requestAnimationFrame(animateProgress);

    // Después de 1.5s, iniciar fade-out y abrir formulario
    setTimeout(() => {
      brandContainer.classList.add('fade-out');

      // Abrir formulario después de que el fade-out termine
      setTimeout(() => {
        window.location.href = formUrl;
      }, duration); // fade-out dura 1.5s
    }, duration); // mostrar branding durante 1.5s
  

    // PWA install prompt
    window.addEventListener('beforeinstallprompt', (e) => {
      e.preventDefault();
      window._deferredPrompt = e;
    });

    // Service worker (opcional)
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('/sw.js').catch(console.error);
      });
    }
  </script>

</body>
</html>
